<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Tank 3D Wireframe</title>
<style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; }
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

let keys = {};
document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

// ----- SIMPLE MATH -----
function project(x, y, z) {
    let scale = 300 / (z + 600);
    return [
        x * scale + canvas.width / 2,
        -y * scale + canvas.height / 2
    ];
}

function rotateY(x, y, z, a) {
    let s = Math.sin(a), c = Math.cos(a);
    return [
        x * c - z * s,
        y,
        x * s + z * c
    ];
}

// ----- TANK MODEL -----
const tankPoints = [
    [-20,  0, -30],
    [ 20,  0, -30],
    [ 20,  0,  30],
    [-20,  0,  30],

    [-20, 20, -30],
    [ 20, 20, -30],
    [ 20, 20,  30],
    [-20, 20,  30],
];

const tankEdges = [
    [0,1],[1,2],[2,3],[3,0],
    [4,5],[5,6],[6,7],[7,4],
    [0,4],[1,5],[2,6],[3,7]
];

// ----- PLAYER -----
// позиции
let px = 0;
let pz = 0;
let rot = 0; // угол поворота

// скорость
const moveSpeed = 2.5;
const rotSpeed = 0.04;

// ----- UPDATE -----
function update() {
    // движение
    if (keys["w"]) {
        px -= Math.sin(rot) * moveSpeed;
        pz -= Math.cos(rot) * moveSpeed;
    }
    if (keys["s"]) {
        px += Math.sin(rot) * moveSpeed;
        pz += Math.cos(rot) * moveSpeed;
    }
    // поворот
    if (keys["a"]) rot += rotSpeed;
    if (keys["d"]) rot -= rotSpeed;
}

// ----- DRAW TANK -----
function drawTank() {
    ctx.strokeStyle = "white";
    ctx.beginPath();

    let transformed = tankPoints.map(p => {
        let [x,y,z] = rotateY(p[0], p[1], p[2], rot);
        return project(x + px, y, z + pz);
    });

    for (let [a,b] of tankEdges) {
        let p1 = transformed[a];
        let p2 = transformed[b];
        ctx.moveTo(p1[0], p1[1]);
        ctx.lineTo(p2[0], p2[1]);
    }

    ctx.stroke();
}

// ----- MAIN LOOP -----
function loop() {
    update();

    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawTank();

    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
